#parse('/templates/base/header.vm')

 <script src="assets/js/socket.io.min.js"></script>

 <script type="text/javascript">
 var socket = io.connect('http://178.33.171.199:1232');

        socket.on('log', function (obj) {
            append("INFO", obj)

            var consoleElement = document.getElementById("console");

            consoleElement.scrollTop = consoleElement.scrollHeight;
        });

        socket.on('serverLog', function(obj) {
            $('#console').append(obj + "<br />");
        });

        function append(level, data) {
            if(level === ">") {
                $('#console').append("<font color='green'>" + data + "</font><br />");
            } else {
                $('#console').append("[" + level + "][" +  new Date().toLocaleString() + "] " + data + "<br />");
             }
        }

        socket.on('connect', function() {
            socket.emit("Command", "authenticate cometServer69");
            socket.emit("Command", "listen $instance.id");
        });

        $(document).ready(function() {
            $("#consoleCommand").on("keypress", function(e) {
                if (e.keyCode == 13) {
                    socket.emit("Command", $(this).val())
                    append(">", $(this).val())

                    $(this).val("")
                }
            });
        });
        </script>

<style type="text/css">
    .settings {
        padding-top: 10px;
    }

</style>

<script type="text/javascript">
    $(document).ready(function () {
        $('#showPassword').click(function () {
            var passwordField = $('#password');

            if (passwordField.attr('type') === 'text') {
                // hide the password
                passwordField.attr('type', 'password');
                $(this).html('Show');
            } else {
                passwordField.attr('type', 'text');
                $(this).html('Hide');
            }
        });

        $('#showToken').click(function () {
            var passwordField = $('#token');

            if (passwordField.attr('type') === 'text') {
                // hide the password
                passwordField.attr('type', 'password');
                $(this).html('Show');
            } else {
                passwordField.attr('type', 'text');
                $(this).html('Hide');
            }
        });
    });

</script>

<ol class="breadcrumb">
    <li><a href="/home">Home</a></li>
    <li>Instance</li>
    <li><a href="/instance/$instance.id">$instance.name</a></li>
    <li class="active">Console</li>
</ol>

<div class="row">

    #parse('/templates/components/instance-sidebar.vm')

    <div class="col-md-8">
        <div class="panel panel-default">
            <div class="panel-heading"><b>Console</b></div>
            <div class="panel-body" id="console">

            </div>
        </div>
    </div>
</div>
#include('/templates/base/footer.vm')